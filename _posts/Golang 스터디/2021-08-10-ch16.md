---
title: "[21.08.10] Golang_스터디 CH_16"
date: 2021-08-10 15:00:28 -0400
toc: true
toc_sticky: true
categories: Golang_Study
---


# 💭 패키지 

##  1. 패키지란?

**패키지**<sup>package</sup>란 Go언어에서 코드를 묶는 가장 큰 단위로, 함수로는 코드 블록을 , 구조체로는 데이터를, 그리고 패키지로는 함수, 구조체, 그리고 그 외 코드를 묶는다.           

프로그램은 **main패키지(필수 요소)** 하나와 **여러 외부 패키지(선택 요소)**로 구성된다.  

### 📌 [1] <u>main 패키지</u>

main패키지는 **특별한 패키지**로 **프로그램 시작점인 main()함수를 포함한 패키지**이다.     
      
 
### 📌 [2] <u>그외 패키지</u>
       
한 프로그램은 main 패키지 외에 다수의 다른 패키지를 포함할 수 있다.     

예를 들어 표준 입출력은 `fmt` 패키지를, 암호화 기능은 `crypto` 패키지를, 네트워크 기능은 `net` 패키지를 임포트<sup>import</sup> 해 사용하면 된다.                         
       

### 📌 [3] <u>유용한 패키지 찾기</u>

모든 걸 처음부터 코딩할 필요는 없음! 우리가 생각하는 대부분의 기능들은 이미 패키지로 배포되고 있는 경우가 많다.           

먼저 [이 링크](http://golang.org/pkg)를 통해 표준 패키지 목록을 확인해보자!       

만약 표준 패키지에서 제공하지 않는 기능이라면 공개된 외부 패키지에서 원하는 기능을 제공하는지 찾아보는 것도 좋다. Go언어에서 많이 사용되는 패키지는 ['Awesome GO'](http://github.com/avelino/awesome-go)에서 확인 가능!     
카테고리별로 프로그래머들이 많이 사용하는 패키지들을 찾아볼 수 있다.               


##  2. 패키지 사용하기

패키지를 사용하려면 import 예약어로 임포트를 한 후, 원하는 패키지 경로를 따옴표로 묶어서 써줄 수 있다.     
이렇게 패키지를 가져오면, 해당 패키지에서 **외부로 노출하는 함수, 구조체, 변수, 상수 등을 사용**할 수 있으며, **외부 노출 여부**는 **변수명, 함수명, 구조체명의 첫 글자가 대문자인지 소문자인지로 구분 가능**!       
대문자로 시작하면 노출되고, 소문자로 시작하면 노출되지 않는 식이다. 

패키지 명은 가져오는 패키지 경로의 가장 마지막 폴더명.     
       

### 📌 [1] <u>임포트하기</u>

import 뒤에 패키지명을 큰따옴표로 묶어서 적으면 된다.     

   ```go
import "fmt"
   ```                           

소괄호로 패키지들을 묶어 여러 패키지를 임포트시킬 수도 있음!       

   ```go
import (
	"fmt"
	"os"
)
   ```    

### 📌 [2] <u>패키지 멤버에 접근하기</u>

패키지를 가져오면 **<u>해당 패키지명</u>을 쓰고 <u>점`.` 연산자를 사용</u>해 패키지에서 제공하는 함수, 구조체 등에 접근**할 수 있다.           

   ```go
import "fmt"

fmt.Println("Hello World")
   ```                           
 

### 📌 [3] <u>경로가 있는 패키지 사용하기</u>

경로가 있는 패키지는 어떻게 사용하면 될까?        

**마지막 폴더명의 경로를 명시**해 주면 된다.

예를 들어 math 내의 rand 패키지를 사용하고 싶다고 가정해 보면, 다음과 같이 사용할 수 있을 것이다.        

   ```go
 package main
 
 import (
 	"fmt"
 	"math/rand"	// 마지막 폴더명의 경로를 명시
 )
 
 func main() {
 	fmt.Println(rand.Int())
 }
   ```        

### 📌 [4] <u>겹치는 패키지 문제 : 별칭으로 풀기!</u>

만약 패키지명이 겹치는 경우, **별칭**<sup>aliasing</sup> 을 패키지 명 앞에 써서 구별해 주면 된다.      

   ```go
import (
	"text/template" 
	"html/template" // 같은 이름의 template 패키지
)
   ``` 

마지막 폴더명이 같아 결국 패키지명이 같으므로, 별칭을 붙여 해결해 보자!       

   ```go
import (
	"text/template"
	htemplate "html/template"	// 별칭 htemplate
   ```
이제 "html/template" 패키지는 htemplate 이름으로 사용할 수 있다.      

### 📌 [5] <u>사용하지 않는 패키지 포함하기</u>

패키지를 임포트하고 나서 사용하지 않으면 에러가 발생하기 때문에, **패키지를 가져오면 반드시 사용**해야 한다.       

패키지를 직접 사용하지 않지만 부과효과를 얻고자 임포트하는 경우에는 밑줄 `_`을 패키지명 앞에 붙여주면 됨!         
     
 <div class="notice--primary" markdown="1">
🌝 <strong><u>여기서 잠깐!</u> : <u>Go는 import된 패키지를 어떻게 찾을까?</u></strong>      

1. Go언어에서 기본 제공하는 패키지는 Go 설치 경로에서 찾는다.   

2. 깃 허브와 같은 외부 저장소에 저장된 패키지의 경우 외부 저장소에서 다운 받아서 GOPATH\pkg 폴더에 설치한다.       
    이 떄, Go 모듈에 정의된 패키지 버전에 맞게 다운로드 하게 됨!   

3. 현재 모듈 아래에 위치한 패키지인지 검사한다.           
      
</div>

##  3. Go 모듈

Go 모듈은 Go 패키지들을 모아놓은 Go 프로젝트 단위로, Go 모듈이 기본이 되면서 모든 Go 코드는 Go 모듈 아래에 있어야 함.      
`go build`를 하려면 반드시 Go 모듈 폴더에 `go.mod` 파일이 있어야 한다.      

Go 언어에서는 `go build`를 통해 실행파일을 만들 때 `go.mod`와 외부 저장소 패키지 버전 정보를 담고 있는 `go.sum` 파일을 통해 외부 패키지와 모듈 내 패키지를 합쳐서 실행 파일을 만들게 된다.    

Go 모듈은 **go mod init** 명령을 통해 만들 수 있음!      

	go mod init [패키지명]	

<div class="notice--primary" markdown="1">
💡 <strong><u>추가 지식!</u> : <u>모듈 만든 후, 외부 패키지 활용하기</u></strong>      

- 같은 Go 모듈 아래 있는 패키지는 Go 모듈명 아래 위치하도록 해줘야 한다.       

- 패키지 추가 후, <code>go mod tidy</code>를 실행해 주면, Go 모듈에 필요한 패키지를 찾아서 다운 후, 필요한 패키지 정보를 <code>go.mod</code>파일과 <code>go.sum</code> 파일에 적어주게 된다.                 
</div>

##  4. 패키지명과 패키지 외부 공개

Go언어에서 패키지명은 쉽고 간단하게, 모든 문자를 소문자로 할 것을 권장하고 있다.      
패키지 전역으로 **선언된 첫 글자가 대문자로 시작되는 모든 변수, 상수, 타입, 함수, 메서드는 패키지 외부로 공개**된다.          

##  5. 패키지 초기화

패키지를 임포트하면 어떤 일이 벌어질까.     

패키지를 임포트하면 컴파일러는 우선 **패키지 내 전역 변수를 초기화** 한 후, **패키지에 init() 함수가 있다면 호출해 패키지를 초기화**한다.        
이 때 init() 함수는 반드시 입력 매개변수가 없고 반환값도 없는 함수여야 한다.      

만약 어떤 패키지의 초기화 함수인 **init() 함수 기능만 사용하기 원할 경우 밑줄 _을 이용하여 임포트**하면 됨!      

_


# 👩🏻‍💻 관련 추가 과제

## 1. 다음 패키지에서 외부로 공개되는 항목을 모두 쓰세요.

   ```go
package screen
var ScreenX = 680
var ScreenY = 720
var width = 1080

const ColorDepth = 15
const velocity = 8

func ResizeScreen(x, y int) {
	ScreenX, ScreenY = x, y
}

func changeWidth(w int) {
	width = w
}
   ```

첫 글자가 대문자인 것들 !

### A) 

   ```go
ScreenX
ScreenY
ColorDepth
ResizeScreen(x, y int)
   ```

## 2. 다음 패키지를 임포트했을 때 출력 결과를 쓰세요.

   ```go
package custom

import "fmt"

var (
	a = b + f()
	b = c
	c = f()
	d = 3
)

func init() {
	fmt.Println("init function a:%d, b:%d, c:%d, d:%d\n", a, b, c, d)
}

func f() init {
	d++
	fmt.Println("f() d:", d)
	return d
}
   ```


초기에 a 초기화려면 b, c, d가 필요함. c 초기화하면서 f호출, a 초기화하면서도 f 호출에 주의하자!             

### A) 

   ```go
f() d: 4
f() d: 5
init function a:9, b:4, c:4, d:5
   ```
